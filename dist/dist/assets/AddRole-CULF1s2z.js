import{r as o,v as w,w as k,x as f,y,z as j,E as N,H as R,I as S,J as T,j as l,d as A,A as P,B as v}from"./index-BzYBcspH.js";const U=({onClose:d,fetchNewRole:m})=>{const[u,p]=o.useState(""),[i,b]=o.useState([{name:"Dashboard",icon:w,value:"dashboard",permissions:[{label:"Total Courses Generated",value:"totalcourse"},{label:"Total No Of Users",value:"totalusers"},{label:"Revenue Generated",value:"totalrevenue"},{label:"Course Type",value:"coursetype"},{label:"Subscriptions",value:"subscription"},{label:"Recurring Revenue",value:"recurringrevenue"},{label:"Ticket Status",value:"ticketstatus"},{label:"Monthly Activity Progress",value:"monthlyProgress"},{label:"Revenue",value:"revenue"}]},{name:"Packages",icon:k,value:"packages",permissions:[{label:"Can view Packages",value:"view"},{label:"Can add Packages",value:"add"},{label:"Can edit Packages",value:"edit"},{label:"Can delete Packages",value:"delete"}]},{name:"Courses",icon:f,value:"courses",permissions:[{label:"Can view Courses",value:"view"},{label:"Can Generate Courses",value:"create"},{label:"Can delete Courses",value:"delete"}]},{name:"Subscriptions",icon:y,value:"subscription",permissions:[{label:"Can view Subscriptions",value:"view"}]},{name:"Users",icon:j,value:"users",permissions:[{label:"Can View Users",value:"view"},{label:"Can add Users",value:"create"},{label:"Can Edit Users",value:"edit"},{label:"Can Delete Users",value:"delete"}]},{name:"Team",icon:N,value:"team",permissions:[{label:"Can View Team",value:"view"},{label:"Can add Team",value:"create"},{label:"Can Edit Team",value:"edit"},{label:"Can Delete Team",value:"delete"}]},{name:"Help & Support",icon:R,value:"support",permissions:[{label:"Can view Tickets",value:"view"},{label:"Can assign Tickets",value:"assign"},{label:"Can reply to all tickets",value:"reply"},{label:"Can reply to self tickets",value:"self"}]},{name:"Reports",icon:S,value:"report",permissions:[{label:"Can view Reports",value:"view"},{label:"Can Download Reports",value:"download"}]},{name:"Settings",icon:T,value:"setting",permissions:[{label:"Roles & permission",value:"roles"},{label:"Taxes",value:"tax"},{label:"Help & Support",value:"support"}]}]),[r,c]=o.useState([]),h=a=>{const e=[...i];e[a].checked=!e[a].checked,b(e),e[a].checked?c(s=>{const t={feature:e[a].value,permissions:e[a].permissions.map(n=>n.value)};return[...s,t]}):c(r.filter(s=>s.feature!==e[a].value))},C=(a,e)=>{const s=[...r],t=s.findIndex(n=>n.feature===i[a].value);t!==-1&&(s[t].permissions.includes(e)?s[t].permissions=s[t].permissions.filter(n=>n!==e):s[t].permissions.push(e),c(s))},g=async()=>{const a={role_name:u,accessLevels:r,status:"active"};try{const e=await A.post(`${P}/api/roleaccesslevel`,a,{});e.status===200?(v.success("Role created Successfully"),d(),m()):(console.error("Error in posting data",e),v.error("Failed to Upload"))}catch(e){console.error("Error in posting data",e)}};return l.jsxs("div",{className:"bg-[#000928] py-3",children:[l.jsxs("div",{className:"mb-2 mx-6",children:[l.jsx("h3",{className:"my-2 text-base text-white",children:"Role Name:"}),l.jsx("input",{type:"text",value:u,onChange:a=>p(a.target.value),className:"py-1 mb-5 rounded-md text-center text-black w-3/4 "}),i.map((a,e)=>l.jsxs("div",{className:"grid mb-3 text-base",children:[l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("label",{className:"flex items-center gap-2 w-3/6",children:[l.jsx("img",{className:"size-5",src:a.icon,alt:"icons"}),a.name]}),l.jsx("input",{type:"checkbox",checked:a.checked||!1,onChange:()=>h(e)})]}),a.checked&&l.jsx("div",{className:"grid mx-6",children:a.permissions.map((s,t)=>{var n;return l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-sm w-4/6",children:s.label}),l.jsx("input",{type:"checkbox",value:s.value,checked:((n=r.find(x=>x.feature===a.value))==null?void 0:n.permissions.includes(s.value))||!1,onChange:()=>C(e,s.value)})]},t)})})]},e))]}),l.jsx("div",{className:"flex justify-center my-8",children:l.jsx("button",{className:"text-lg bg-gradient-to-r from-[#3D03FA] to-[#A71CD2] w-1/2 py-1.5",onClick:g,children:"Save"})})]})};export{U as default};
