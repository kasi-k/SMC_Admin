import{c as D,a as t,i as n,r as i,u as $,b as E,d as q,A as S,j as e,F,o as V,B as O}from"./index-BzYBcspH.js";import{A as R}from"./index-CDPs5Oz8.js";const U=D().shape({stripeId:t().trim().required("stripeId  is required"),packagename:t().trim().required("Package name is required"),duration:t().trim().required("Plan Duration is required"),price:n().required("price in USD is required"),inr:n().required("price in INR required"),course:t().trim().required("courses is required"),tax:n().required("tax is required"),subtopic:t().oneOf(["5","10"],"Please select a valid number of subtopics").required("Please select the number of subtopics"),coursetype:t().oneOf(["Text & Image Course","Video & Text Course"],"Please select a valid course type").required("Please select the course type")}),B=()=>{var m,h,j,N,b,g,y,f,v,k;const[l,I]=i.useState(!1),[d,o]=i.useState([]),P=$();i.useEffect(()=>{A()},[]);const{register:s,handleSubmit:T,watch:p,formState:{errors:r}}=E({resolver:V(U)}),x=p("subtopic"),u=p("coursetype"),C=async a=>{I(!0);const c={...a,packagename:a.packagename.toLowerCase()};try{(await q.post(`${S}/api/subscriptionplan`,c)).status===200&&(O.success("Package created Successfully"),P("/packages"))}catch(w){console.log(w)}},A=async()=>{try{const a=await q.get(`${S}/api/gettax`);Array.isArray(a.data.tax)?o(a.data.tax):(console.error("Expected an array of tax options, but got:",a.data),o([]))}catch(a){console.error("Error fetching taxes:",a)}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"font-extralight ",children:[e.jsx("p",{className:"mb-2 mx-2 mt-4 ",children:"Add a new package"}),e.jsx("hr",{}),e.jsxs("form",{onSubmit:T(C),className:"mx-4 my-6 ",children:[e.jsxs("div",{className:"grid gap-2.5 font-extralight ",children:[e.jsxs("label",{className:"text-lg col-span-12",children:["Package Name ",e.jsx("span",{className:" text-red-600",children:"*"})]}),e.jsx("input",{...s("packagename"),placeholder:"Enter Package name",className:"col-span-2 text-black rounded-md py-1.5 px-2",required:!0}),e.jsx("p",{className:"text-red-700",children:(m=r.packagename)==null?void 0:m.message})," ",e.jsxs("label",{className:"text-lg col-span-12",children:["Plan Duration ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{...s("duration"),className:"col-span-2 text-black rounded-md py-1.5 px-2",required:!0,children:[e.jsx("option",{value:"",disabled:!0,selected:!0,children:"Select Plan Duration"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"halfYearly",children:"Half-Yearly"}),e.jsx("option",{value:"annual",children:"Annual"})]}),e.jsx("p",{className:"text-red-700",children:(h=r.duration)==null?void 0:h.message})," ",e.jsxs("label",{className:"text-lg col-span-12",children:["Price In USD ",e.jsx("span",{className:" text-red-600",children:"*"})]}),e.jsx("input",{...s("price"),placeholder:"Enter Price In USD",className:"col-span-2 text-black rounded-md py-1.5 px-2",required:!0}),e.jsxs("label",{className:"text-lg col-span-12",children:["Price In INR ",e.jsx("span",{className:" text-red-600",children:"*"})]}),e.jsx("input",{...s("inr"),placeholder:"Enter Price In INR",className:"col-span-2 text-black rounded-md py-1.5 px-2",required:!0}),e.jsx("p",{className:"text-red-700",children:(j=r.inr)==null?void 0:j.message}),e.jsxs("label",{className:"text-lg col-span-12",children:["No of Courses ",e.jsx("span",{className:" text-red-600",children:"*"})]}),e.jsx("input",{...s("course"),type:"number",placeholder:"00",className:"col-span-2 text-black rounded-md py-1.5 px-2",required:!0}),e.jsx("p",{className:"text-red-700",children:(N=r.course)==null?void 0:N.message}),e.jsxs("label",{className:"text-lg col-span-12",children:["Tax ",e.jsx("span",{className:" text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative inline-block col-span-2 ",children:[e.jsxs("select",{...s("tax"),defaultValue:"select",className:" w-full text-black px-2 py-1.5 outline-none rounded-md ",children:[e.jsx("option",{value:"select",disabled:!0,children:"Select Tax"}),d&&d.map((a,c)=>e.jsxs("option",{value:a.percentage,children:[a.percentage,"%"]},c))]}),e.jsx("p",{className:"text-red-700",children:(b=r.tax)==null?void 0:b.message}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-5 bg-gray-300 px-4 rounded-lg pointer-events-none outline-none",children:e.jsx(F,{className:"text-black text-2xl"})})]}),e.jsxs("label",{className:"text-lg col-span-12",children:["Stripe ID ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{...s("stripeId"),placeholder:"Enter Stripe ID",className:"col-span-2 text-black rounded-md py-1.5 px-2",defaultValue:"N/A"}),e.jsx("p",{className:"text-red-700",children:(g=r.stripeId)==null?void 0:g.message}),e.jsxs("label",{className:"text-lg col-span-12",children:["No of Subtopic ",e.jsx("span",{className:" text-red-600",children:"*"})]}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsxs("div",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{...s("subtopic"),type:"radio",id:"5",value:"5",className:"hidden peer"}),e.jsx("p",{className:"text-red-700",children:(y=r.subtopic)==null?void 0:y.message}),e.jsxs("label",{htmlFor:"5",className:"flex items-center cursor-pointer",children:[e.jsx("span",{className:"w-4 h-4 border-2 border-gray-400 rounded-sm flex items-center justify-center peer-checked:border-blue-500 peer-checked:bg-blue-500",children:e.jsx("span",{className:`w-3 h-3  ${x==="5"?"bg-white":"hidden"}`})}),e.jsx("span",{className:"ml-2",children:"05"})]})]}),e.jsxs("div",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{...s("subtopic"),type:"radio",id:"10",value:"10",className:"hidden peer"}),e.jsx("p",{className:"text-red-700",children:(f=r.subtopic)==null?void 0:f.message}),e.jsxs("label",{htmlFor:"10",className:"flex items-center cursor-pointer",children:[e.jsx("span",{className:"w-4 h-4 border-2 border-gray-400 rounded-sm flex items-center justify-center peer-checked:border-blue-500 peer-checked:bg-blue-500",children:e.jsx("span",{className:`w-3 h-3  ${x==="10"?"bg-white":"hidden"}`})}),e.jsx("span",{className:"ml-2",children:"10"})]})]})]}),e.jsxs("p",{className:"text-lg py-2 col-span-12",children:["Course Type ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsxs("div",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{...s("coursetype"),type:"radio",id:"textcourse",value:"Text & Image Course",className:"hidden peer"}),e.jsx("p",{className:"text-red-700",children:(v=r.coursetype)==null?void 0:v.message}),e.jsxs("label",{htmlFor:"textcourse",className:"flex items-center cursor-pointer",children:[e.jsx("span",{className:"w-4 h-4 border-2 border-gray-400 rounded-sm flex items-center justify-center peer-checked:border-blue-500 peer-checked:bg-blue-500",children:e.jsx("span",{className:`w-3 h-3  ${u==="Text & Image Course"?"bg-white":"hidden"}`})}),e.jsx("span",{className:"ml-2",children:"Theory & Image Course"})]})]}),e.jsxs("div",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{...s("coursetype"),type:"radio",id:"videocourse",value:"Video & Text Course",className:"hidden peer"}),e.jsx("p",{className:"text-red-700",children:(k=r.coursetype)==null?void 0:k.message}),e.jsxs("label",{htmlFor:"videocourse",className:"flex items-center cursor-pointer",children:[e.jsx("span",{className:"w-4 h-4 border-2 border-gray-400 rounded-sm flex items-center justify-center peer-checked:border-blue-500 peer-checked:bg-blue-500",children:e.jsx("span",{className:`w-3 h-3  ${u==="Video & Text Course"?"bg-white":"hidden"}`})}),e.jsx("span",{className:"ml-2",children:"Video & Theory Course"})]})]})]})]}),e.jsx("button",{type:"submit",className:`my-6 text-white bg-gradient-to-r from-[#3D03FA] to-[#A71CD2] px-14 py-2 ${l?"opacity-50 cursor-not-allowed":""} `,disabled:l,children:l?e.jsxs("div",{className:"flex  text-xl gap-2",children:[e.jsx(R,{className:"h-6 w-6 animate-spin"}),e.jsx("p",{children:"Saving...."})]}):"Save"})]})]})})};export{B as default};
