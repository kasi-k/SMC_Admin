import{c as U,a as c,r as m,k,u as M,b as T,d,A as x,j as e,P as B,o as V,B as O}from"./index-CrC78F0C.js";import{U as R}from"./UpdateImage-D9EZim6o.js";const _=U().shape({fname:c().trim().required("First name is required").transform(t=>t.toLowerCase()),lname:c().required("Last name is required").transform(t=>t.toLowerCase()),email:c().email("Please Enter a valid Email").trim().required("Email is required"),phone:c().required("Please enter mob.no"),dob:c().required("Please enter Date of birth"),designation:c().required("Please select Designation")}),K=()=>{var f,N,w,b,y,v,D;const[t,g]=m.useState(!1),p=(f=k().state)==null?void 0:f.userId,[G,E]=m.useState({}),[l,P]=m.useState({}),[h,u]=m.useState([]),[S,A]=m.useState(null),j=M();m.useEffect(()=>{L(),$(),q()},[t]);const{register:r,handleSubmit:C,setValue:i,formState:{errors:o}}=T({resolver:V(_)}),$=async()=>{try{const s=await d.get(`${x}/api/getadminbyid/${p}`),n=s.data.user;E(n);const a=s.data.user;i("fname",a.fname),i("lname",a.lname),i("dob",a.dob),i("email",a.email),A(a.email),i("phone",a.phone),i("designation",a.designation)}catch(s){console.log(s)}},q=async()=>{try{const n=(await d.get(`${x}/api/getimagebyid?user=${p}`)).data.user;P(n)}catch(s){console.log(s)}},I=()=>{g(!t)},F=async s=>{const n={...s};try{(await d.put(`${x}/api/adminupdate/${p}`,n)).status===200&&(O.success("Admin Updated Successfully"),j("/team"))}catch(a){console.error("Error updating category:",a)}},L=async()=>{try{const s=await d.get(`${x}/api/getroles`);Array.isArray(s.data.role)?u(s.data.role):(console.error("Expected an array of tax options, but got:",s.data),u([]))}catch(s){console.error("Error fetching taxes:",s)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-extralight my-4",children:[e.jsx("p",{className:" mx-2 text-lg ",children:"Edit Team"}),e.jsx("hr",{}),e.jsxs("div",{className:"mx-2 my-4 space-y-1",children:[e.jsx("button",{onClick:()=>j("/changepassword",{state:{adminemail:S}}),className:" float-end bg-gradient-to-r from-[#3D03FA] to-[#A71CD2] px-5 py-2",children:"Change Password"}),e.jsxs("div",{className:"mx-10 ",children:[e.jsx("img",{src:l!=null&&l.image?l.image:B,alt:"Profile",className:`w-40 h-40 ${l!=null&&l.image?" rounded-3xl object-cover":""}`}),e.jsx("button",{className:" text-base  bg-gradient-to-r from-[#3D03FA] to-[#A71CD2] lg:w-40 md:w-40 w-40 py-2.5 my-5 ",onClick:()=>g(!0),children:"Change Image"})]})]}),e.jsx("form",{onSubmit:C(F),children:e.jsxs("div",{className:"mx-2 ",children:[e.jsx("p",{className:"my-2",children:"Personal Information"}),e.jsx("hr",{}),e.jsxs("div",{className:"grid lg:grid-cols-12 my-6 mx-4 gap-4 text-slate-400",children:[e.jsxs("div",{className:"col-span-3",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"mb-7 ",children:"First Name"}),e.jsx("input",{type:"text",id:"fname",className:" outline-none bg-transparent lg:w-2/3 md:w-1/2 w-28 px-2",...r("fname")}),e.jsx("p",{className:"text-red-700",children:(N=o.fname)==null?void 0:N.message})]}),e.jsx("hr",{className:"lg:w-2/3 md:w-1/2 w-20"})]}),e.jsxs("div",{className:"col-span-3 ",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"mb-7 ",children:"Last Name"}),e.jsx("input",{type:"text",id:"lname",className:" outline-none bg-transparent lg:w-2/3 md:w-1/2 w-28 px-2 ",...r("lname")}),e.jsx("p",{className:"text-red-700",children:(w=o.lname)==null?void 0:w.message})]}),e.jsx("hr",{className:"lg:w-2/3 md:w-1/2 w-20"})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"mb-6 ",children:"Date Of Birth"}),e.jsx("input",{type:"date",className:"outline-none bg-transparent lg:w-2/3 md:w-1/2 w-28 ",...r("dob")}),e.jsx("p",{className:"text-red-700",children:(b=o.dob)==null?void 0:b.message})]}),e.jsx("hr",{className:"lg:w-2/3 md:w-1/2 w-28"})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"mb-3 ",children:"Designation"}),e.jsxs("select",{...r("designation"),defaultValue:"select",className:" w-2/3 outline-none  rounded-md py-1.5 px-2  bg-transparent",children:[e.jsx("option",{value:"select",disabled:!0,children:"Select Designation"}),h&&h.map((s,n)=>e.jsx("option",{value:s.designation,children:s.role_name},n))]}),e.jsx("p",{className:"text-red-700",children:(y=o.designation)==null?void 0:y.message})]}),e.jsx("hr",{className:"lg:w-2/3 md:w-1/2 w-28"})]})]}),e.jsx("p",{className:"my-2",children:"Contact Information"}),e.jsx("hr",{}),e.jsxs("div",{className:"font-extralight grid lg:grid-cols-3 mx-2 my-8 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"mb-6",children:"Email"}),e.jsx("input",{type:"email",id:"email",className:" bg-transparent outline-none lg:w-54 md:w-56 w-48 px-2",...r("email")}),e.jsx("p",{className:"text-red-700",children:(v=o.email)==null?void 0:v.message})]}),e.jsx("hr",{className:"lg:w-54 md:w-56 w-48 mb-6"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"mb-6",children:"Phone"}),e.jsx("input",{type:"tel",name:"phone",id:"phone",className:"bg-transparent  outline-none lg:w-1/2 md:w-56 w-48 px-2",...r("phone")}),e.jsx("p",{className:"text-red-700",children:(D=o.phone)==null?void 0:D.message})]}),e.jsx("hr",{className:"lg:w-1/2 md:w-56 w-48 mb-6"})]})]}),e.jsx("button",{type:"submit",className:" mx-2 bg-gradient-to-r from-[#3D03FA] to-[#A71CD2] px-16 py-2",children:"Save"})]})})]}),t&&e.jsx(R,{CloseProfileModal:I})]})};export{K as default};
