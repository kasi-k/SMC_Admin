import{c as k,a as i,r as o,u as C,b as B,d as p,A as x,j as e,P as z,o as R,B as A}from"./index-BzYBcspH.js";import{A as M}from"./index-CDPs5Oz8.js";const O=k().shape({fname:i().trim().required("First name is required").transform(r=>r.toLowerCase()),lname:i().required("Last name is required").transform(r=>r.toLowerCase()),email:i().email("Please Enter a valid Email").trim().required("Email is required"),phone:i().required("Please enter mob.no"),dob:i().required("Please enter Date of birth"),designation:i().required("Please select Designation")}),G=()=>{var f,y,b,N,v,S;const[r,w]=o.useState(!1),[g,D]=o.useState(null),[E,F]=o.useState(""),[m,P]=o.useState(null),[u,h]=o.useState([]),j=C();o.useEffect(()=>{$()},[]);const{register:l,handleSubmit:I,formState:{errors:n}}=B({resolver:R(O)}),q=s=>{const a=s.target.files[0];if(!a){alert("Please select a file!");return}const t=2*1024*1024;if(a.size>t){alert("File size exceeds 2MB!");return}D(a);const c=new FileReader;c.onload=()=>{const d=c.result;F(d),P(d)},c.readAsDataURL(a)},L=async s=>{w(!0);const a={...s,password:"Admin@123",type:"free"};try{const t=await p.post(`${x}/api/adminsignup`,a),c=t.data.userId;if(t.status===200&&g!==null){const d={name:g.name,user:c,image:E},T=(await p.post(`${x}/api/images`,d)).data.image;A.success("AdminId and profile Image created Successfully"),j("/team")}else A.success("New Admin created Successfully");j("/team")}catch(t){console.log("error",t.response?t.response.data:t.message)}},$=async()=>{try{const s=await p.get(`${x}/api/getroles`);Array.isArray(s.data.role)?h(s.data.role):(console.error("Expected an array of tax options, but got:",s.data),h([]))}catch(s){console.error("Error fetching taxes:",s)}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"font-extralight my-4",children:[e.jsx("p",{className:" mx-2 text-lg ",children:"Add a new team"}),e.jsx("hr",{}),e.jsxs("div",{className:"mx-12 my-6 space-y-1",children:[e.jsx("img",{src:m||z,alt:"Profile",className:`w-40 h-40 ${m?" rounded-3xl object-cover":""}`}),e.jsxs("div",{className:"relative text-base  bg-gradient-to-r from-[#3D03FA] to-[#A71CD2] lg:w-40 h-12   my-5  ",children:[e.jsx("p",{className:" absolute text-lg  py-2.5 text-center right-4",children:"Upload Image"}),e.jsx("input",{accept:".jpg,.jpeg,.png,.gif",type:"file",onChange:q,className:"opacity-0 w-full h-full"})]})]}),e.jsxs("form",{onSubmit:I(L),children:[e.jsxs("div",{className:"grid lg:grid-cols-12 md:grid-cols-10 mx-6 gap-6 ",children:[e.jsxs("div",{className:"grid col-span-3",children:[e.jsx("label",{children:"First Name"}),e.jsx("input",{...l("fname"),type:"text",placeholder:"Enter First name",className:"outline-none text-black rounded-md py-1.5 px-3 my-3 "}),e.jsx("p",{className:"text-red-700",children:(f=n.fname)==null?void 0:f.message})]}),e.jsxs("div",{className:"grid col-span-3",children:[e.jsx("label",{children:"Last Name"}),e.jsx("input",{...l("lname"),type:"text",placeholder:"Enter Last name",className:"outline-none text-black rounded-md py-1.5 px-3 my-3"}),e.jsx("p",{className:"text-red-700",children:(y=n.lname)==null?void 0:y.message})]}),e.jsxs("div",{className:"grid col-span-3",children:[e.jsx("label",{children:"Email"}),e.jsx("input",{...l("email"),type:"email",placeholder:"Enter Email",className:"outline-none text-black rounded-md py-1.5 px-3 my-3"}),e.jsx("p",{className:"text-red-700",children:(b=n.email)==null?void 0:b.message})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-12 md:grid-cols-10 mx-6 gap-6 my-5",children:[e.jsxs("div",{className:"grid col-span-3",children:[e.jsx("label",{children:"Phone"}),e.jsx("input",{...l("phone"),type:"text",className:"outline-none text-black rounded-md py-1.5 px-3 my-3",placeholder:"Enter Mobile Number"}),e.jsx("p",{className:"text-red-700",children:(N=n.phone)==null?void 0:N.message})]}),e.jsxs("div",{className:"grid col-span-3",children:[e.jsx("label",{children:"Date Of Birth"}),e.jsx("input",{...l("dob"),type:"date",className:"outline-none text-black rounded-md py-1.5 px-3 my-3"}),e.jsx("p",{className:"text-red-700",children:(v=n.dob)==null?void 0:v.message})]}),e.jsxs("div",{className:"grid col-span-3",children:[e.jsxs("label",{children:["Designation",e.jsx("span",{className:"text-red-600 ",children:"*"})]}),e.jsxs("select",{...l("designation"),defaultValue:"select",className:"outline-none text-black rounded-md py-1.5 px-3 my-3",children:[e.jsx("option",{value:"select",disabled:!0,children:"Select Designation"}),u&&u.map((s,a)=>e.jsx("option",{value:s.designation,children:s.role_name},a))]}),e.jsx("p",{className:"text-red-700",children:(S=n.designation)==null?void 0:S.message})]})]}),e.jsx("button",{type:"submit",className:`lg:absolute text-lg bottom-10 mx-6   bg-gradient-to-r from-[#3D03FA] to-[#A71CD2] px-16 py-2 ${r?"opacity-50 cursor-not-allowed":""}`,disabled:r,children:r?e.jsxs("div",{className:"flex  text-xl gap-2",children:[e.jsx(M,{className:"h-6 w-6 animate-spin"}),e.jsx("p",{children:"Saving...."})]}):"Save"})]})," "]})})};export{G as default};
